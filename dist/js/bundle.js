!function(t){var e={};function n(o){if(e[o])return e[o].exports;var i=e[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(o,i,function(e){return t[e]}.bind(null,i));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=4)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(2),i=function(){return function(){this._canvas=document.getElementById("game"),this._ctx=this._canvas.getContext("2d"),this._config=o.default}}();e.default=i},function(t,e,n){"use strict";var o=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,i,r=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(o=r.next()).done;)s.push(o.value)}catch(t){i={error:t}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}return s};function i(t){var e=o(t.split("-").map(parseInt),2);return{x:e[0],y:e[1]}}function r(t){return t.x+"-"+t.y}Object.defineProperty(e,"__esModule",{value:!0}),e.stringToPosition=i,e.PositionToSting=r,e.default={stringToPosition:i,PositionToSting:r}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default={COLOR:{SHADOW:"lightyellow",BACKGROUND:"rgb(32,43,65)",GRID_LINE:"white",GAME:"lightyellow",P1:"rgb(103,197,222)",P2:"rgb(231,137,133)"},LATTICE:{SIZE:100},GAME_CHIP:{RADIUS:20,SPEED:.01}}},function(t,e,n){"use strict";var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),s=function(t){function e(e,n){var o=t.call(this)||this;return o.position=e,o.ownedBy=n,o.id=r.default.PositionToSting(e),o.hover=!1,o.selected=!1,o}return i(e,t),e.prototype.render=function(){this._ctx.beginPath(),this._ctx.arc(this.position.x*this._config.LATTICE.SIZE,this.position.y*this._config.LATTICE.SIZE,this._config.GAME_CHIP.RADIUS,0,2*Math.PI,!1),this._ctx.shadowBlur=5,this._ctx.shadowColor=this.hover?this._config.COLOR.SHADOW:"rgba(0,0,0,0)",this._ctx.fillStyle=this._config.COLOR[this.ownedBy],this._ctx.fill(),this._ctx.closePath(),this._ctx.lineWidth=4,this._ctx.strokeStyle=this.selected?"crimson":"black",this._ctx.stroke()},e}(n(0).default);e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),(new(n(5).default)).start("P1")},function(t,e,n){"use strict";var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__values||function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}};Object.defineProperty(e,"__esModule",{value:!0});var s=n(1),c=n(2),u=n(3),a=n(6),h=n(7),f=function(t){function e(){var e=t.call(this)||this;e._canvas.height=600,e._canvas.width=600,e.config=c.default,e.board=new a.default;var n=e.board.load();return e.chips=n.chips,e.hints=[],e.message=new h.default,e.gameover=!1,e._canvas.onmousemove=function(t){var n=e.getEventPositon(t),o=!1;e.chips.map(function(t){var i=e.isInside(t.position,n);t.hover=i,i&&(o=!0)}),o?(e.render(),document.getElementById("game").style.cursor="pointer"):document.getElementById("game").style.cursor="default"},e._canvas.onclick=function(t){var n,o;if(!e.selected||Boolean(e.hints.length)){var i=e.getEventPositon(t),s=!1;try{for(var c=r(e.chips),a=c.next();!a.done;a=c.next()){var h=a.value,f=e.isInside(h.position,i);if(f){if(h.ownedBy!==e.turn)return;s=!0,e.selected=h,e.hints=[],e.searchHintPoints(h.position).map(function(t){return e.hints.push(new u.default(t,"GAME"))})}h.selected=f}}catch(t){n={error:t}}finally{try{a&&!a.done&&(o=c.return)&&o.call(c)}finally{if(n)throw n.error}}e.hints.map(function(t){e.isInside(t.position,i)&&(e.hints=[],e.to(t.position))}),s&&e.render()}},e}return i(e,t),e.prototype.start=function(t){this.turn=t,this.ai=this.nextTurn(),console.log("__START__"),this.render()},e.prototype.render=function(){this._ctx.clearRect(0,0,window.innerWidth,window.innerHeight),this.board.render(),this.renderChips(),this.renderHints(),this.message.msg&&this.message.render()},e.prototype.occupy=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.getChips(this.nextTurn()).map(function(n){var o,i;try{for(var s=r(e),c=s.next();!c.done;c=s.next()){var u=c.value;n.position.x===u.x&&n.position.y===u.y&&(n.ownedBy=t.turn)}}catch(t){o={error:t}}finally{try{c&&!c.done&&(i=s.return)&&i.call(s)}finally{if(o)throw o.error}}})},e.prototype.getEventPositon=function(t){var e=this._canvas.getBoundingClientRect();return{x:t.clientX-e.left,y:t.clientY-e.top}},e.prototype.renderChips=function(){this.chips.map(function(t){return t.render()})},e.prototype.renderHints=function(){this.hints.map(function(t){return t.render()})},e.prototype.move=function(t){var e;if("string"==typeof t){var n=this.chips.filter(function(e){return e.id===t});1===n.length?e=n[0]:Error("ID not found")}else e=t;return this.selected=e,this},e.prototype.to=function(t){var e=this;return new Promise(function(n){var o=t.x-e.selected.position.x,i=t.y-e.selected.position.y,r=function(){var s=!0;e.selected.position.x!==t.x&&(s=!1,e.selected.position.x+=o/50,e.selected.position.x=parseFloat(e.selected.position.x.toFixed(2))),e.selected.position.y!==t.y&&(s=!1,e.selected.position.y+=i/50,e.selected.position.y=parseFloat(e.selected.position.y.toFixed(2))),s?(e.selected=null,e.check(),e.render(),e.turn=e.nextTurn(),n(null)):(e.render(),requestAnimationFrame(r))};r()})},e.prototype.choose=function(t){return t[Math.floor(Math.random()*t.length)]},e.prototype.autoPlay=function(){var t=this;console.log("my turn");var e=this.getChips(this.turn),n=function(){var o=t.choose(e);t.selected=o;var i=t.searchHintPoints(o.position);console.log(i),i||n(),t.to(t.choose(i))};n()},e.prototype.nextTurn=function(){return"P1"===this.turn?"P2":"P1"},e.prototype.getChips=function(t){return this.chips.filter(function(e){return e.ownedBy===t})},e.prototype.check=function(){this.checkPoked(),this.checkClutch(),this.checkWin()},e.prototype.checkWin=function(){var t=this.getChips("P1"),e=this.getChips("P2");0!==t.length&&this.hasPotential(t)||(this.message.msg="P1 WIN",this.gameover=!0),0!==e.length&&this.hasPotential(e)||(this.message.msg="P2 WIN",this.gameover=!0),console.log(this.message.msg)},e.prototype.hasPotential=function(t){var e=this,n=[];return t.map(function(t){n=n.concat(e.searchHintPoints(t.position))}),Boolean(n.length)},e.prototype.checkPoked=function(){var t=this,e=this.getChips(this.nextTurn()).map(function(t){return t.position});2!==e.length&&this.getChips(this.turn).map(function(n){t.checkSingleAround(n.position,e,"poke")&&(n.ownedBy=t.turn,t.check(),t.render())})},e.prototype.checkClutch=function(){var t=this,e=this.getChips(this.nextTurn()),n=this.getChips(this.turn).map(function(t){return t.position});1!==e.length&&e.map(function(e){t.checkSingleAround(e.position,n)&&(e.ownedBy=t.turn,t.check(),t.render())})},e.prototype.checkSingleAround=function(t,e,n){var o,i;return void 0===n&&(n="clutch"),o={x:t.x-1,y:t.y-1},i={x:t.x+1,y:t.y+1},this.isInMap(o,i)&&this.isOccupied(e,o,i)?("poke"===n&&this.occupy(o,i),!0):(o={x:t.x,y:t.y-1},i={x:t.x,y:t.y+1},this.isInMap(o,i)&&this.isOccupied(e,o,i)?("poke"===n&&this.occupy(o,i),!0):(o={x:t.x+1,y:t.y-1},i={x:t.x-1,y:t.y+1},this.isInMap(o,i)&&this.isOccupied(e,o,i)?("poke"===n&&this.occupy(o,i),!0):(o={x:t.x+1,y:t.y},i={x:t.x-1,y:t.y},!(!this.isInMap(o,i)||!this.isOccupied(e,o,i))&&("poke"===n&&this.occupy(o,i),!0))))},e.prototype.isInMap=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.every(function(t){return t.x>=1&&t.x<=5&&t.y>=1&&t.y<=5})},e.prototype.isInside=function(t,e){return Math.sqrt(Math.pow(Math.abs(t.x*this.config.LATTICE.SIZE-e.x),2)+Math.pow(Math.abs(t.y*this.config.LATTICE.SIZE-e.y),2))<this.config.GAME_CHIP.RADIUS},e.prototype.isOccupied=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e.every(function(e){var n=t.filter(function(t){return t.x===e.x&&t.y===e.y});return Boolean(n.length)})},e.prototype.searchHintPoints=function(t){var e=this,n=s.default.PositionToSting(t),o=this.board.directionMap[n],i=[];return o.forEach(function(n){i=i.concat(e.searchDirectionHintPoints(t,e.board.vectors[n]))}),i},e.prototype.searchDirectionHintPoints=function(t,e){for(var n=[],o={x:t.x+e.x,y:t.y+e.y},i=this.chips.map(function(t){return t.position});this.isInMap(o)&&!this.isOccupied(i,o);)n.push(o),o={x:o.x+e.x,y:o.y+e.y};return n},e}(n(0).default);e.default=f},function(t,e,n){"use strict";var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),r=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,i,r=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(o=r.next()).done;)s.push(o.value)}catch(t){i={error:t}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}return s},s=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(r(arguments[e]));return t};Object.defineProperty(e,"__esModule",{value:!0});var c=n(3),u=function(t){function e(){var e=t.call(this)||this;e.paths=[],s(Array(5).keys()).map(function(t){var n=t+1;e.paths.push({from:[n,1],to:[n,5]}),e.paths.push({from:[1,n],to:[5,n]})}),e.paths=e.paths.concat([{from:[1,1],to:[5,5]},{from:[1,5],to:[5,1]}]),e.paths=e.paths.concat([{from:[3,1],to:[1,3]},{from:[1,3],to:[3,5]},{from:[3,5],to:[5,3]},{from:[5,3],to:[3,1]}]);var n=["left","down","right"],o=["top","down","right"],i=["top","down","left"],r=["top","right","left"],c=["left","top","down","right"],u=["topLeft","topRight","downLeft","downRight"];return e.directionMap={"1-1":["right","down","downRight"],"2-1":s(n),"3-1":s(n,["downLeft","downRight"]),"4-1":s(n),"5-1":["left","downLeft","down"],"1-2":s(o),"2-2":s(c,u),"3-2":s(c),"4-2":s(c,u),"5-2":s(i),"1-3":s(o,["topRight","downRight"]),"2-3":s(c),"3-3":s(c,u),"4-3":s(c),"5-3":s(i,["topLeft","downLeft"]),"1-4":s(o),"2-4":s(c,u),"3-4":s(c),"4-4":s(c,u),"5-4":s(i),"1-5":["right","top","topRight"],"2-5":s(r),"3-5":s(r,["topLeft","topRight"]),"4-5":s(r),"5-5":["left","topLeft","top"]},e.vectors={topLeft:{x:-1,y:-1},top:{x:0,y:-1},topRight:{x:1,y:-1},left:{x:-1,y:0},right:{x:1,y:0},downLeft:{x:-1,y:1},down:{x:0,y:1},downRight:{x:1,y:1}},e}return i(e,t),e.prototype.load=function(){var t=[],e=[],n=s(Array(5).keys());return n.map(function(e){n.map(function(n){t.push({x:e+1,y:n+1})})}),n.map(function(t){e.push(new c.default({x:t+1,y:1},"P1")),e.push(new c.default({x:t+1,y:5},"P2"))}),{map:t,chips:e}},e.prototype.render=function(){var t=this;this._ctx.fillStyle=this._config.COLOR.BACKGROUND,this._ctx.fillRect(0,0,window.innerWidth,window.innerHeight),this.paths.map(function(e){t._ctx.strokeStyle=t._config.COLOR.GRID_LINE,t._ctx.shadowBlur=0,t._ctx.beginPath(),t._ctx.moveTo(e.from[0]*t._config.LATTICE.SIZE,e.from[1]*t._config.LATTICE.SIZE),t._ctx.lineTo(e.to[0]*t._config.LATTICE.SIZE,e.to[1]*t._config.LATTICE.SIZE),t._ctx.lineWidth=1,t._ctx.stroke(),t._ctx.closePath()})},e}(n(0).default);e.default=u},function(t,e,n){"use strict";var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(){var e=t.call(this)||this;return e.msg="",e}return i(e,t),e.prototype.render=function(){var t=50,e=250;this._ctx.beginPath(),this._ctx.beginPath(),this._ctx.moveTo(60,e),this._ctx.lineTo(540,e),this._ctx.quadraticCurveTo(550,e,550,260),this._ctx.lineTo(550,340),this._ctx.quadraticCurveTo(550,350,540,350),this._ctx.lineTo(60,350),this._ctx.quadraticCurveTo(t,350,t,340),this._ctx.lineTo(t,260),this._ctx.quadraticCurveTo(t,e,60,e),this._ctx.closePath(),this._ctx.fillStyle="white",this._ctx.fill(),this._ctx.stroke(),this.msg&&(this._ctx.fillStyle="black",console.log(this.msg),this._ctx.font="50px Courier New",this._ctx.fillText(this.msg,this._canvas.width/2-100,this._canvas.height/2+20))},e}(n(0).default);e.default=r}]);