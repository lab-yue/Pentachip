!function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(o,r,function(e){return t[e]}.bind(null,r));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=4)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(2),r=function(){return function(){this._canvas=document.getElementById("game"),this._ctx=this._canvas.getContext("2d"),this._config=o.default}}();e.default=r},function(t,e,n){"use strict";var o=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,r,i=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(o=i.next()).done;)s.push(o.value)}catch(t){r={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return s};function r(t){var e=o(t.split("-").map(parseInt),2);return{x:e[0],y:e[1]}}function i(t){return t.x+"-"+t.y}Object.defineProperty(e,"__esModule",{value:!0}),e.stringToPosition=r,e.PositionToSting=i,e.default={stringToPosition:r,PositionToSting:i}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default={COLOR:{SHADOW:"lightyellow",BACKGROUND:"rgb(32,43,65)",GRID_LINE:"white",GAME:"lightyellow",P1:"rgb(103,197,222)",P2:"rgb(231,137,133)"},LATTICE:{SIZE:100},GAME_CHIP:{RADIUS:20,SPEED:.01}}},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),s=function(t){function e(e,n){var o=t.call(this)||this;return o.position=e,o.ownedBy=n,o.id=i.default.PositionToSting(e),o.hover=!1,o.selected=!1,o}return r(e,t),e.prototype.render=function(){this._ctx.beginPath(),this._ctx.arc(this.position.x*this._config.LATTICE.SIZE,this.position.y*this._config.LATTICE.SIZE,this._config.GAME_CHIP.RADIUS,0,2*Math.PI,!1),this._ctx.shadowBlur=5,this._ctx.shadowColor=this.hover?this._config.COLOR.SHADOW:"rgba(0,0,0,0)",this._ctx.fillStyle=this._config.COLOR[this.ownedBy],this._ctx.fill(),this._ctx.closePath(),this._ctx.lineWidth=4,this._ctx.strokeStyle=this.selected?"crimson":"black",this._ctx.stroke()},e}(n(0).default);e.default=s},function(t,e,n){"use strict";var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function s(t){try{u(o.next(t))}catch(t){i(t)}}function c(t){try{u(o.throw(t))}catch(t){i(t)}}function u(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(s,c)}u((o=o.apply(t,e||[])).next())})},r=this&&this.__generator||function(t,e){var n,o,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,o=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},i=this;Object.defineProperty(e,"__esModule",{value:!0});var s=n(5);o(i,void 0,void 0,function(){var t;return r(this,function(e){switch(e.label){case 0:return(t=new s.default).start("P1"),[4,t.auto()];case 1:return e.sent(),[2]}})})},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function s(t){try{u(o.next(t))}catch(t){i(t)}}function c(t){try{u(o.throw(t))}catch(t){i(t)}}function u(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(s,c)}u((o=o.apply(t,e||[])).next())})},s=this&&this.__generator||function(t,e){var n,o,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,o=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},c=this&&this.__values||function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}};Object.defineProperty(e,"__esModule",{value:!0});var u=n(1),a=n(2),h=n(3),l=n(6),f=n(7),p=function(t){function e(){var e=t.call(this)||this;e._canvas.height=600,e._canvas.width=600,e.config=a.default,e.board=new l.default;var n=e.board.load();return e.chips=n.chips,e.hints=[],e.message=new f.default,e.gameover=!1,e._canvas.onmousemove=function(t){var n=e.getEventPositon(t),o=!1;e.chips.map(function(t){var r=e.isInside(t.position,n);t.hover=r,r&&(o=!0)}),o?(e.render(),document.getElementById("game").style.cursor="pointer"):document.getElementById("game").style.cursor="default"},e._canvas.onclick=function(t){var n,o;if(!e.selected||Boolean(e.hints.length)){var r=e.getEventPositon(t),i=!1;try{for(var s=c(e.chips),u=s.next();!u.done;u=s.next()){var a=u.value,l=e.isInside(a.position,r);if(l){if(a.ownedBy!==e.turn)return;i=!0,e.selected=a,e.hints=[],e.searchHintPoints(a.position).map(function(t){return e.hints.push(new h.default(t,"GAME"))})}a.selected=l}}catch(t){n={error:t}}finally{try{u&&!u.done&&(o=s.return)&&o.call(s)}finally{if(n)throw n.error}}e.hints.map(function(t){e.isInside(t.position,r)&&(e.hints=[],e.to(t.position))}),i&&e.render()}},e}return r(e,t),e.prototype.start=function(t){this.turn=t,this.ai=this.nextTurn(),console.log("__START__"),this.render()},e.prototype.render=function(){this._ctx.clearRect(0,0,window.innerWidth,window.innerHeight),this.board.render(),this.renderChips(),this.renderHints(),this.message.msg&&this.message.render()},e.prototype.occupy=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.getChips(this.nextTurn()).map(function(n){var o,r;try{for(var i=c(e),s=i.next();!s.done;s=i.next()){var u=s.value;n.position.x===u.x&&n.position.y===u.y&&(n.ownedBy=t.turn)}}catch(t){o={error:t}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}})},e.prototype.getEventPositon=function(t){var e=this._canvas.getBoundingClientRect();return{x:t.clientX-e.left,y:t.clientY-e.top}},e.prototype.renderChips=function(){this.chips.map(function(t){return t.render()})},e.prototype.renderHints=function(){this.hints.map(function(t){return t.render()})},e.prototype.move=function(t){var e;if("string"==typeof t){var n=this.chips.filter(function(e){return e.id===t});1===n.length?e=n[0]:Error("ID not found")}else e=t;return this.selected=e,this},e.prototype.to=function(t){var e=this;return new Promise(function(n){var o=t.x-e.selected.position.x,r=t.y-e.selected.position.y,i=function(){var s=!0;e.selected.position.x!==t.x&&(s=!1,e.selected.position.x+=o/50,e.selected.position.x=parseFloat(e.selected.position.x.toFixed(2))),e.selected.position.y!==t.y&&(s=!1,e.selected.position.y+=r/50,e.selected.position.y=parseFloat(e.selected.position.y.toFixed(2))),s?(e.selected=null,e.check(),e.render(),e.turn=e.nextTurn(),n(null)):(e.render(),requestAnimationFrame(i))};i()})},e.prototype.choose=function(t){return t[Math.floor(Math.random()*t.length)]},e.prototype.autoPlay=function(){return i(this,void 0,void 0,function(){var t,e,n,o=this;return s(this,function(r){switch(r.label){case 0:return console.log("my turn"),t=this.getChips(this.turn),n=(e=function(){var n=o.choose(t);o.selected=n;var r=o.searchHintPoints(n.position);if(console.log(r),r.length){var i=o.choose(r);return void 0===i&&(console.log({selected:o.selected}),console.log({possible:r})),i}e()})(),[4,this.to(n)];case 1:return r.sent(),[2]}})})},e.prototype.auto=function(){return i(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return this.gameover?[3,2]:[4,this.autoPlay()];case 1:return t.sent(),[3,0];case 2:return[2]}})})},e.prototype.nextTurn=function(){return"P1"===this.turn?"P2":"P1"},e.prototype.getChips=function(t){return this.chips.filter(function(e){return e.ownedBy===t})},e.prototype.check=function(){this.checkPoked(),this.checkClutch(),this.checkWin()},e.prototype.checkWin=function(){var t=this.getChips("P1"),e=this.getChips("P2");0!==t.length&&this.hasPotential(t)||(this.message.msg="P1 WIN",this.gameover=!0),0!==e.length&&this.hasPotential(e)||(this.message.msg="P2 WIN",this.gameover=!0),console.log(this.message.msg)},e.prototype.hasPotential=function(t){var e=this,n=[];return t.map(function(t){n=n.concat(e.searchHintPoints(t.position))}),Boolean(n.length)},e.prototype.checkPoked=function(){var t=this,e=this.getChips(this.nextTurn()).map(function(t){return t.position});2!==e.length&&this.getChips(this.turn).map(function(n){t.checkSingleAround(n.position,e,"poke")&&(n.ownedBy=t.turn,t.check(),t.render())})},e.prototype.checkClutch=function(){var t=this,e=this.getChips(this.nextTurn()),n=this.getChips(this.turn).map(function(t){return t.position});1!==e.length&&e.map(function(e){t.checkSingleAround(e.position,n)&&(e.ownedBy=t.turn,t.check(),t.render())})},e.prototype.checkSingleAround=function(t,e,n){var o,r;return void 0===n&&(n="clutch"),o={x:t.x-1,y:t.y-1},r={x:t.x+1,y:t.y+1},this.isInMap(o,r)&&this.isOccupied(e,o,r)?("poke"===n&&this.occupy(o,r),!0):(o={x:t.x,y:t.y-1},r={x:t.x,y:t.y+1},this.isInMap(o,r)&&this.isOccupied(e,o,r)?("poke"===n&&this.occupy(o,r),!0):(o={x:t.x+1,y:t.y-1},r={x:t.x-1,y:t.y+1},this.isInMap(o,r)&&this.isOccupied(e,o,r)?("poke"===n&&this.occupy(o,r),!0):(o={x:t.x+1,y:t.y},r={x:t.x-1,y:t.y},!(!this.isInMap(o,r)||!this.isOccupied(e,o,r))&&("poke"===n&&this.occupy(o,r),!0))))},e.prototype.isInMap=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.every(function(t){return t.x>=1&&t.x<=5&&t.y>=1&&t.y<=5})},e.prototype.isInside=function(t,e){return Math.sqrt(Math.pow(Math.abs(t.x*this.config.LATTICE.SIZE-e.x),2)+Math.pow(Math.abs(t.y*this.config.LATTICE.SIZE-e.y),2))<this.config.GAME_CHIP.RADIUS},e.prototype.isOccupied=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e.every(function(e){var n=t.filter(function(t){return t.x===e.x&&t.y===e.y});return Boolean(n.length)})},e.prototype.searchHintPoints=function(t){var e=this,n=u.default.PositionToSting(t),o=this.board.directionMap[n],r=[];return o.forEach(function(n){r=r.concat(e.searchDirectionHintPoints(t,e.board.vectors[n]))}),r},e.prototype.searchDirectionHintPoints=function(t,e){for(var n=[],o={x:t.x+e.x,y:t.y+e.y},r=this.chips.map(function(t){return t.position});this.isInMap(o)&&!this.isOccupied(r,o);)n.push(o),o={x:o.x+e.x,y:o.y+e.y};return n},e}(n(0).default);e.default=p},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,r,i=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(o=i.next()).done;)s.push(o.value)}catch(t){r={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return s},s=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(i(arguments[e]));return t};Object.defineProperty(e,"__esModule",{value:!0});var c=n(3),u=function(t){function e(){var e=t.call(this)||this;e.paths=[],s(Array(5).keys()).map(function(t){var n=t+1;e.paths.push({from:[n,1],to:[n,5]}),e.paths.push({from:[1,n],to:[5,n]})}),e.paths=e.paths.concat([{from:[1,1],to:[5,5]},{from:[1,5],to:[5,1]}]),e.paths=e.paths.concat([{from:[3,1],to:[1,3]},{from:[1,3],to:[3,5]},{from:[3,5],to:[5,3]},{from:[5,3],to:[3,1]}]);var n=["left","down","right"],o=["top","down","right"],r=["top","down","left"],i=["top","right","left"],c=["left","top","down","right"],u=["topLeft","topRight","downLeft","downRight"];return e.directionMap={"1-1":["right","down","downRight"],"2-1":s(n),"3-1":s(n,["downLeft","downRight"]),"4-1":s(n),"5-1":["left","downLeft","down"],"1-2":s(o),"2-2":s(c,u),"3-2":s(c),"4-2":s(c,u),"5-2":s(r),"1-3":s(o,["topRight","downRight"]),"2-3":s(c),"3-3":s(c,u),"4-3":s(c),"5-3":s(r,["topLeft","downLeft"]),"1-4":s(o),"2-4":s(c,u),"3-4":s(c),"4-4":s(c,u),"5-4":s(r),"1-5":["right","top","topRight"],"2-5":s(i),"3-5":s(i,["topLeft","topRight"]),"4-5":s(i),"5-5":["left","topLeft","top"]},e.vectors={topLeft:{x:-1,y:-1},top:{x:0,y:-1},topRight:{x:1,y:-1},left:{x:-1,y:0},right:{x:1,y:0},downLeft:{x:-1,y:1},down:{x:0,y:1},downRight:{x:1,y:1}},e}return r(e,t),e.prototype.load=function(){var t=[],e=[],n=s(Array(5).keys());return n.map(function(e){n.map(function(n){t.push({x:e+1,y:n+1})})}),n.map(function(t){e.push(new c.default({x:t+1,y:1},"P1")),e.push(new c.default({x:t+1,y:5},"P2"))}),{map:t,chips:e}},e.prototype.render=function(){var t=this;this._ctx.fillStyle=this._config.COLOR.BACKGROUND,this._ctx.fillRect(0,0,window.innerWidth,window.innerHeight),this.paths.map(function(e){t._ctx.strokeStyle=t._config.COLOR.GRID_LINE,t._ctx.shadowBlur=0,t._ctx.beginPath(),t._ctx.moveTo(e.from[0]*t._config.LATTICE.SIZE,e.from[1]*t._config.LATTICE.SIZE),t._ctx.lineTo(e.to[0]*t._config.LATTICE.SIZE,e.to[1]*t._config.LATTICE.SIZE),t._ctx.lineWidth=1,t._ctx.stroke(),t._ctx.closePath()})},e}(n(0).default);e.default=u},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(){var e=t.call(this)||this;return e.msg="",e}return r(e,t),e.prototype.render=function(){var t=50,e=250;this._ctx.beginPath(),this._ctx.beginPath(),this._ctx.moveTo(60,e),this._ctx.lineTo(540,e),this._ctx.quadraticCurveTo(550,e,550,260),this._ctx.lineTo(550,340),this._ctx.quadraticCurveTo(550,350,540,350),this._ctx.lineTo(60,350),this._ctx.quadraticCurveTo(t,350,t,340),this._ctx.lineTo(t,260),this._ctx.quadraticCurveTo(t,e,60,e),this._ctx.closePath(),this._ctx.fillStyle="white",this._ctx.fill(),this._ctx.stroke(),this.msg&&(this._ctx.fillStyle="black",console.log(this.msg),this._ctx.font="50px Courier New",this._ctx.fillText(this.msg,this._canvas.width/2-100,this._canvas.height/2+20))},e}(n(0).default);e.default=i}]);